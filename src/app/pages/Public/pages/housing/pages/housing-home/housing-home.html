<div class="housing-home-container" [class.loading]="isLoading">
    <!-- Header Title -->
    <header class="page-header">
        <div class="header-bg-glow"></div>
        <div class="container text-center">
            <div class="top-badge animate__animated animate__fadeIn">NYC Discovery</div>
            <h1 class="main-title">NYC Housing</h1>
            <p class="subtitle">Find your perfect home in the city that never sleeps. Explore curated listings and local
                neighborhood insights.</p>
        </div>
    </header>

    <div class="container main-content">
        <!-- 1. Hero Section -->
        <section class="hero-section" *ngIf="heroPost">
            <div class="hero-card shadow-premium" [routerLink]="['/public/posts/details', heroPost.id]">
                <div class="hero-img">
                    <img [src]="imageService.resolveImageUrl(heroPost.attachments[0]?.url, 'post')"
                        [appImgFallback]="'post'" alt="Featured Property">
                    <div class="hero-badge">FEATURED</div>
                </div>
                <div class="hero-content">
                    <div class="meta">
                        <span class="badge-status">New Listing</span>
                        <span class="time"><i class="bi bi-clock"></i> {{ heroPost.createdAt | date:'shortTime'
                            }}</span>
                    </div>
                    <h2>{{ heroPost.title }}</h2>
                    <p class="excerpt">{{ (heroPost.content | slice:0:160) + '...' }}</p>
                    <div class="hero-footer">
                        <span class="price-main">{{ formatPrice(getPostMetadata(heroPost.content)?.Price || 0) }}</span>
                        <button class="btn btn-details">View details <i class="bi bi-arrow-right"></i></button>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. Action Bar -->
        <div class="action-bar-premium mb-5">
            <div class="right-actions w-100 justify-content-center">
                <button class="btn btn-post-listing" [routerLink]="['/public/housing/create']">
                    <i class="bi bi-plus-circle"></i> Post A Listing
                </button>
                <button class="btn btn-community-post" [routerLink]="['/public/posts/create']">
                    <i class="bi bi-pencil-square"></i> Community Post
                </button>
            </div>
        </div>



        <!-- 4. Homes For Sale -->
        <section class="listings-section" *ngIf="homesForSale.length > 0">
            <div class="section-head">
                <h3>Homes For Sale</h3>
            </div>
            <div class="listings-grid">
                <div class="listing-card" *ngFor="let item of homesForSale"
                    [routerLink]="['/public/posts/details', item.id]">
                    <div class="card-img">
                        <img [src]="imageService.resolveImageUrl(item.attachments[0]?.url, 'post')"
                            [appImgFallback]="'post'" alt="Listing Image">
                    </div>
                    <div class="card-body">
                        <h4 class="title">{{ item.title }}</h4>
                        <div class="specs">
                            <span><i class="bi bi-house"></i> {{ getPostMetadata(item.content)?.SizeSqFt || '0' }}
                                sqft</span>
                            <span><i class="bi bi-door-open"></i> {{ getPostMetadata(item.content)?.Rooms || '0' }}
                                rooms</span>
                            <span><i class="bi bi-droplet"></i> {{ getPostMetadata(item.content)?.Bathrooms || '0' }}
                                baths</span>
                        </div>
                        <div class="price">{{ formatPrice(getPostMetadata(item.content)?.Price || 0) }}</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 5. Homes For Rent -->
        <section class="listings-section" *ngIf="homesForRent.length > 0">
            <div class="section-head">
                <h3>Homes For Rent</h3>
                <a routerLink="/public/discover" [queryParams]="{cat: 4, type: 'rent'}" class="view-all">View All</a>
            </div>
            <div class="listings-grid rent-grid">
                <div class="listing-card-rent" *ngFor="let item of homesForRent"
                    [routerLink]="['/public/posts/details', item.id]">
                    <div class="card-img">
                        <img [src]="imageService.resolveImageUrl(item.attachments[0]?.url, 'post')"
                            [appImgFallback]="'post'" alt="Listing Image">
                    </div>
                    <div class="card-body">
                        <small class="location">{{ item.location?.borough || 'New York' }}</small>
                        <div class="price-row">
                            <span class="price">{{ formatPrice(getPostMetadata(item.content)?.Price || 0) }}/mo</span>
                            <span class="badge-urgent">Urgent Listing</span>
                        </div>
                        <p class="building">Boutique Building 1BR</p>
                        <div class="specs-mini">
                            <span><i class="bi bi-door-open"></i> 2 Bed</span>
                            <span><i class="bi bi-droplet"></i> 1 Bath</span>
                            <span class="details-link">Details</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>




    </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" *ngIf="isLoading">
    <div class="spinner"></div>
</div>