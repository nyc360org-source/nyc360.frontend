<div class="requests-page-container">

    <!-- Header Section -->
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">Housing Requests</h1>
            <p class="page-subtitle">Manage incoming applications from potential tenants.</p>
        </div>

        <!-- Search Bar -->
        <div class="search-wrapper">
            <i class="bi bi-search search-icon"></i>
            <input type="text" placeholder="Search by name, email or post..." [(ngModel)]="searchQuery"
                (input)="onSearchChange()" class="search-input">
        </div>
    </div>

    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
        <div class="spinner-gold"></div>
        <p>Loading requests...</p>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!isLoading && filteredRequests.length === 0">
        <div class="empty-icon">
            <i class="bi bi-inbox"></i>
        </div>
        <h3>No Requests Found</h3>
        <p>We couldn't find any housing applications matching your criteria.</p>
    </div>

    <!-- Requests Grid -->
    <div class="requests-grid" *ngIf="!isLoading && filteredRequests.length > 0">

        <div class="request-card" *ngFor="let req of filteredRequests">
            <div class="card-header">
                <div class="user-info">
                    <div class="avatar-placeholder">
                        {{ req.name ? req.name.charAt(0).toUpperCase() : 'U' }}
                    </div>
                    <div>
                        <h3 class="applicant-name">{{ req.name }}</h3>
                        <span class="request-date">{{ req.preferredContactDate | date:'mediumDate' }}</span>
                    </div>
                </div>
                <div class="status-badge new">New</div>
            </div>

            <div class="card-body">
                <div class="info-row">
                    <span class="label">Interested In:</span>
                    <span class="value post-link" (click)="viewPost(req.post?.id)">
                        {{ req.post?.title || 'Unknown Property' }} <i class="bi bi-box-arrow-up-right ms-1"></i>
                    </span>
                </div>

                <div class="info-grid">
                    <div class="info-item">
                        <i class="bi bi-people-fill icon"></i>
                        <span>{{ getHouseholdType(req.householdType) }}</span>
                    </div>
                    <div class="info-item">
                        <i class="bi bi-calendar-event-fill icon"></i>
                        <span>Move-in: {{ req.moveInDate | date:'shortDate' }}</span>
                    </div>
                    <div class="info-item">
                        <i class="bi bi-telephone-fill icon"></i>
                        <span>{{ req.phoneNumber }}</span>
                    </div>
                    <div class="info-item">
                        <i class="bi bi-envelope-fill icon"></i>
                        <span>{{ req.email }}</span>
                    </div>
                </div>

                <div class="message-box" *ngIf="req.message">
                    <p class="message-text">"{{ req.message }}"</p>
                </div>
            </div>

            <div class="card-footer">
                <div class="pref-contact">
                    <span class="label">Prefers:</span>
                    <span class="value">{{ getContactType(req.preferredContactType) }}</span>
                </div>
            </div>
        </div>

    </div>

</div>