<div class="events-list-wrapper animate__animated animate__fadeIn">
    <!-- Hero Section -->
    <header class="events-hero py-5 mb-5">
        <div class="container text-center">
            <h1 class="display-3 fw-bold text-navy mb-3">Discover <span class="text-gold">NYC</span> Events</h1>
            <p class="lead text-muted mb-5">The best concerts, festivals, and activities in the city that never sleeps.
            </p>

            <!-- Search & Filter Bar -->
            <div class="search-box mx-auto shadow-lg rounded-pill p-2 bg-white d-flex align-items-center mb-4">
                <i class="bi bi-search ms-3 text-muted"></i>
                <input type="text" class="form-control border-0 bg-transparent ms-2" [(ngModel)]="searchTerm"
                    placeholder="Search events, venues, organizers...">
                <button class="btn btn-navy rounded-pill px-4 ms-2">Find Events</button>
            </div>

            <!-- Category Pills -->
            <div class="category-pills d-flex flex-wrap justify-content-center gap-2">
                <button *ngFor="let cat of categories" class="btn category-pill"
                    [class.active]="selectedCategory === cat.id" (click)="selectedCategory = cat.id">
                    <i [class]="'bi ' + cat.icon + ' me-1'"></i> {{cat.name}}
                </button>
            </div>
        </div>
    </header>

    <div class="container pb-5">
        <!-- Results Info -->
        <div class="d-flex justify-content-between align-items-center mb-4 px-2">
            <h4 class="fw-bold m-0" *ngIf="!isLoading"> Showing {{filteredEvents.length}} Events</h4>
            <div class="dropdown" *ngIf="!isLoading">
                <button class="btn btn-outline-secondary dropdown-toggle rounded-pill" type="button">
                    Sort by: Date
                </button>
            </div>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoading" class="text-center py-5">
            <div class="spinner-border text-gold" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-muted">Curating the best events for you...</p>
        </div>

        <!-- Events Grid -->
        <div class="row g-4" *ngIf="!isLoading">
            <div class="col-md-6 col-lg-4 animate__animated animate__fadeInUp"
                *ngFor="let event of filteredEvents; let i = index" [style.animation-delay]="(i * 0.1) + 's'">

                <div class="event-card h-100 bg-white rounded-4 overflow-hidden border-0 shadow-sm"
                    [routerLink]="['/events/details', event.Id]">
                    <div class="event-img-container">
                        <img [src]="event.BannerUrl || 'assets/images/placeholder-event.jpg'"
                            class="event-img w-100 object-fit-cover" alt="Event Banner">
                        <div class="event-category-badge">
                            <i [class]="'bi ' + getCategoryIcon(event.Category)"></i>
                            {{getCategoryName(event.Category)}}
                        </div>
                        <div class="event-price-tag" *ngIf="getMinPrice(event) > 0">
                            ${{getMinPrice(event)}}
                        </div>
                        <div class="event-price-tag free" *ngIf="getMinPrice(event) === 0">
                            FREE
                        </div>
                    </div>

                    <div class="event-body p-4">
                        <div class="event-date text-gold fw-bold small text-uppercase mb-2">
                            <i class="bi bi-calendar3 me-1"></i>
                            {{event.StartDateTime | date:'EEE, MMM d â€¢ h:mm a'}}
                        </div>
                        <h5 class="event-title fw-bold text-navy mb-3">{{event.Title}}</h5>
                        <div class="event-venue text-muted small mt-auto">
                            <i class="bi bi-geo-alt-fill me-1"></i>
                            {{event.VenueName}}
                        </div>
                    </div>

                    <div class="event-footer px-4 py-3 border-top d-flex justify-content-between align-items-center">
                        <div class="d-flex align-items-center">
                            <i class="bi bi-person-circle text-muted me-2"></i>
                            <span class="small text-muted">Organizer Name</span>
                        </div>
                        <i class="bi bi-heart heart-icon" (click)="$event.stopPropagation()"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- No Results -->
        <div *ngIf="!isLoading && filteredEvents.length === 0" class="text-center py-5">
            <i class="bi bi-calendar-x display-1 text-light-gray mb-3"></i>
            <h3>No events found</h3>
            <p class="text-muted">Try adjusting your filters or search term.</p>
        </div>
    </div>

    <!-- CTA Section -->
    <section class="events-cta py-5 bg-navy text-white text-center">
        <div class="container">
            <h2 class="fw-bold mb-3">Hosting an event in NYC?</h2>
            <p class="mb-4">NYC360 is the best place to reach locals and tourists looking for what to do.</p>
            <button class="btn btn-gold rounded-pill px-5 py-3 fw-bold" routerLink="/events/create">
                CREATE EVENT +
            </button>
        </div>
    </section>
</div>